<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>커뮤니티 글쓰기</title>
<link rel="stylesheet" type="text/css" href="menu.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
</head>

<script>
function store(){
	//localstorage 있는지 확인 -> 없으면 alert창 & return
	if(!window.localStorage){
		alert("");
		return;
	}

//아이디 대신 현재 강아지의 사진을 업로드함
//로컬스토리지의 key에 이미지를 저장하는 변수 lovedog
//이미지를 url형태로 저장함
//왜냐하면 로컬스토리지에는 문자열밖에 못 저장하기 때문
	let chooseFile = document.getElementById("chooseFile").value;
	
	filePath = String(chooseFile);
	//전체경로를 \ 나눔.
	let filePathSplit = filePath.split('\\'); 
	//전체경로를 \로 나눈 길이.
	let filePathLength = filePathSplit.length;
	//마지막 경로를 .으로 나눔.
	let fileNameSplit = filePathSplit[filePathLength-1].split('.');
	let fileName = fileNameSplit[0];
	let space = document.getElementById("space").value; 
	// 로컬 스토리지에 저장(혹은 수정)
	localStorage.setItem(fileName, space);

	alert("글이 저장되었습니다.");
	// 저장 후 <input>에 입력된 단어 지우기
	chooseFile.value = "";
	space.value = "";

}

function viewAll() {
	window.open("Community-view.html", "viewwin");
}	

</script>

<style>
h3{
	font-family: 'Jua', sans-serif;
}

textarea {
	font-size : 1.1em;
	
	font-family: 'Jua', sans-serif;
}

button{
font-family: 'Jua', sans-serif;
}

form{
font-family: 'Jua', sans-serif;
}

</style>

<body>

<header>
<img src="logo.png" 
style="display: block;
 margin: 0 auto;
 width:200px; height:200px;">
</header>

<div class="wrap"> 
<nav class="menu_bar"> 
 <ul class="menu">
  <li class="menu_list" id = 'menu'> <a href="" class="link">입양 안내</a></li>
  <li class="menu_list"id = 'menu'> <a href="" class="link">커뮤니티</a> </li> 
  <li class="menu_list"id = 'menu'> <a href="" class="link">지도</a> </li> 
  <li class="menu_list"id = 'menu'> <a href="moreinfo.html" class="link">캠페인</a> </li> 
 </ul> 
  </nav>
</div>


<h3>커뮤니티 글쓰기</h3>
<hr>
<form>
	<br>사진 업로드<input id="chooseFile" type="file" name="chooseFile" accept="image/*"><br><br>

	<textarea id="space" cols="50" rows="10">
반려동물의 이름 : <br>
작성자 이름 : <br>
내용 : <br>
	</textarea><br>
	<br>

<input type="button" value="저장" onclick="store()">
<span><input type="button" class="custom-btn btn-8" value="전체 글 보기" onclick="viewAll()"></span>
</form>
</body>
</html>
