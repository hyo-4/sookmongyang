<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>커뮤니티 글쓰기</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">

//글 저장 alert창 추가

<script>
function store() {
	//localstorage 있는지 확인 -> 없으면 alert창 & return
	if(!window.localStorage){
		alert("");
		return;
	}

//아이디 대신 현재 강아지의 사진을 업로드함
//로컬스토리지의 key에 이미지를 저장하는 변수 lovedog
//이미지를 url형태로 저장함
//왜냐하면 로컬스토리지에는 문자열밖에 못 저장하기 때문
	let chooseFile = document.getElementById("chooseFile").value;
	
	filePath = String(chooseFile);
	//전체경로를 \ 나눔.
	let filePathSplit = filePath.split('\\'); 
	//전체경로를 \로 나눈 길이.
	let filePathLength = filePathSplit.length;
	//마지막 경로를 .으로 나눔.
	let fileNameSplit = filePathSplit[filePathLength-1].split('.');
	let fileName = fileNameSplit[0];
	let space = document.getElementById("space").value; 
	// 로컬 스토리지에 저장(혹은 수정)
	localStorage.setItem(fileName, space);

	// 저장 후 <input>에 입력된 단어 지우기
	fileName = null;
	space = null;
}

function viewAll() {
	window.open("Community-view.html", "viewwin");

</script>

<style>
h3{
	font-family: 'Jua', sans-serif;
}

textarea {
	font-size : 1.1em;
	font-family: 'Jua', sans-serif;
}

button{
font-family: 'Jua', sans-serif;
}

</style>
</head>
<body>
<header><img src="숙몽냥 배너.jpg" width=100% overflow=hidden>
</header>
<h3>커뮤니티 글쓰기</h3>
<hr>
<form>
	<input id="chooseFile" type="file" 
	name="chooseFile" accept="image/*">사진 업로드</input><br><br>

	<textarea id="space" cols="50" rows="10">
반려동물의 이름 : <br>
작성자 이름 : <br>
내용 : <br>
	</textarea><br>
	<br>
<input type="button" value="전체 보기" onclick="viewAll()">
<input type="button" value="저장" onclick="store()">
</form>
</body>
</html>