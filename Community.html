<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>커뮤니티 글쓰기</title>
<link rel="stylesheet" type="text/css" href="menu.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet">
</head>

<script>
function store(){
	//localstorage 있는지 확인 -> 없으면 alert창 & return
	if(!window.localStorage){
		alert("");
		return;
	}

//아이디 대신 현재 강아지의 사진을 업로드함
//로컬스토리지의 key에 이미지를 저장하는 변수 lovedog
//이미지를 url형태로 저장함
//왜냐하면 로컬스토리지에는 문자열밖에 못 저장하기 때문
	let chooseFile = document.getElementById("chooseFile").value;
	
	filePath = String(chooseFile);
	//전체경로를 \ 나눔.
	let filePathSplit = filePath.split('\\'); 
	//전체경로를 \로 나눈 길이.
	let filePathLength = filePathSplit.length;
	//마지막 경로를 .으로 나눔.
	let fileNameSplit = filePathSplit[filePathLength-1].split('.');
	let fileName = fileNameSplit[0];
	let space = document.getElementById("space").value; 
	// 로컬 스토리지에 저장(혹은 수정)
	localStorage.setItem(fileName, space);

	alert("글이 저장되었습니다.");
	// 저장 후 <input>에 입력된 단어 지우기
	chooseFile.value = "";
	space.value = "";

}

function viewAll() {
	window.open("Community-view.html", "viewwin");
}	

</script>

<style>
h1{
	background-color: #e1e1e6;
	font-family: 'Jua', sans-serif;
	padding :2%;
	left: 2%;
	border:3px solid #4e4e5e;
	border-radius:20px;
}
textarea {
	font-size : 1.1em;
	font-family: 'Jua', sans-serif;
	background-color :#d2e1fa;
}

form{
font-family: 'Jua', sans-serif;
font-size: 20px;

}

#save{
	width: 100px;
    height: 50px;
    position: absolute;
    left: 30%;
    border-radius:20px;
    font-family: 'Jua', sans-serif;
    font-size: 20px;
}

#view{
	width: 120px;
    height: 50px;
    position: absolute;
    left: 40%;
    border-radius:20px;
    font-family: 'Jua', sans-serif;
    font-size: 20px;
}
</style>

<script>
//버튼에 마우스를 올리면 버튼 색상이 변하는 이벤트 발생
let w;
function init(){
	w = document.getElementById("view");
	w.addEventListener("mouseover",over);
	w.addEventListener("mouseout",out);
}

function over(){
	w.style.background = "#393E46";
	w.style.color = "white";
}

function out(){
	w.style.background = "#ffffd1";
	w.style.color = "black";
}
</script>

<body onload="init()">

<header>
<img src="logo.png" 
style="display: block;
 margin: 0 auto;
 width:200px; height:200px;">
</header>

<div class="wrap"> 
<nav class="menu_bar"> 
 <ul class="menu">
  <li class="menu_list" id = 'menu'> <a href="" class="link">입양 안내</a></li>
  <li class="menu_list"id = 'menu'> <a href="" class="link">커뮤니티</a> </li> 
  <li class="menu_list"id = 'menu'> <a href="" class="link">지도</a> </li> 
  <li class="menu_list"id = 'menu'> <a href="moreinfo.html" class="link">캠페인</a> </li> 
 </ul> 
  </nav>
</div>

<h1>커뮤니티 글쓰기</h1>
<form>
<br>	반려동물의 사진을 올려주세요!		
<input id="chooseFile"  type="file" name="chooseFile" accept="image/*"><br><br>
	<textarea id="space" cols="50" rows="10">
반려동물의 이름 : <br>
작성자 이름 : <br>
내용 : <br>
	</textarea><br>
	<br>

<input id="save" type="button" value="저장" onclick="store()">
<span><input id="view" type="button" value="전체 글 보기" onclick="viewAll()"></span>
</form>
</body>
</html>
